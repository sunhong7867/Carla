From 1f2eb733aeb163a5bd51ced9e3ac78fe7421c1ef Mon Sep 17 00:00:00 2001
From: sunhong7867 <tjsghd7867@g.skku.edu>
Date: Sat, 17 May 2025 04:17:48 +0900
Subject: [PATCH] =?UTF-8?q?ACC=5FS001=EC=97=90=20=EB=A7=9E=EC=B6=B0=20PID?=
 =?UTF-8?q?=20=EC=88=98=EC=A0=95?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 .../autonomous_driving_system.cpython-37.pyc  | Bin 7211 -> 7882 bytes
 dev/Control/autonomous_driving_system.py      |  72 ++++---
 .../__pycache__/engine_control.cpython-37.pyc | Bin 338 -> 338 bytes
 .../adaptive_cruise_control.cpython-37.pyc    | Bin 2459 -> 2450 bytes
 .../ego_vehicle_estimation.cpython-37.pyc     | Bin 2767 -> 2767 bytes
 .../target_selection.cpython-37.pyc           | Bin 4565 -> 4767 bytes
 .../decision/adaptive_cruise_control.py       |   4 +-
 dev/Control/decision/arbitration.py           |   1 +
 .../decision/autonomous_emergency_brake.py    |   2 +-
 .../decision/ego_vehicle_estimation.py        |   6 +-
 dev/Control/decision/lane_following_assist.py |   2 +-
 dev/Control/decision/lane_selection.py        |   2 +-
 dev/Control/decision/target_selection.py      |  22 ++-
 dev/Scenario/ACC/ACC_S001.xosc                | 131 ++++++++-----
 dev/Scenario/ACC/ACC_S002.xosc                | 176 ++++++++++--------
 dev/Scenario/EGO/EGO_S001.xosc                |  49 +----
 dev/Scenario/EGO/EGO_S002.xosc                |   2 +-
 dev/Scenario/EGO/EGO_S003.xosc                |  95 +++++-----
 dev/Scenario/EGO/EGO_S004.xosc                |   2 +-
 dev/test/ACC_S001.py                          |  19 +-
 dev/test/ACC_S002.py                          |  17 ++
 dev/test/EGO_S001..py                         |  26 ++-
 dev/test/EGO_S002.py                          |  41 ++--
 dev/test/EGO_S003.py                          |  35 ++--
 24 files changed, 378 insertions(+), 326 deletions(-)
 create mode 100644 dev/test/ACC_S002.py

diff --git a/dev/Control/__pycache__/autonomous_driving_system.cpython-37.pyc b/dev/Control/__pycache__/autonomous_driving_system.cpython-37.pyc
index 2c73ba74069195000f43a78b81e64820e4804daa..f65c46946bca651d48732b845e4b36393f9bdfb3 100644
GIT binary patch
delta 3452
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

delta 2719
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

diff --git a/dev/Control/autonomous_driving_system.py b/dev/Control/autonomous_driving_system.py
index adabf7f..38b2afb 100644
--- a/dev/Control/autonomous_driving_system.py
+++ b/dev/Control/autonomous_driving_system.py
@@ -1,5 +1,6 @@
 import math
 import carla
+from datetime import datetime
 
 from srunner.scenariomanager.actorcontrols.basic_control import BasicControl
 from srunner.scenariomanager.carla_data_provider import CarlaDataProvider
@@ -19,7 +20,7 @@ from decision.shared_types import (
     ObjectData, ObjectType, ObjectStatus
 )
 
-# ========== dict → ObjectData 변환 ==========
+# ========== dict → ObjectData 전환 ==========
 def convert_dict_to_objectdata(d):
     return ObjectData(
         object_id=d["object_id"],
@@ -42,6 +43,7 @@ class AutonomousDrivingSystem(BasicControl):
         super(AutonomousDrivingSystem, self).__init__(actor)
         print("======= ADAS Python System Activated =======")
 
+        self.start_time_ms = None
         self.world = CarlaDataProvider.get_world()
         self.map = self.world.get_map()
         self.spectator = self.world.get_spectator()
@@ -79,7 +81,7 @@ class AutonomousDrivingSystem(BasicControl):
         vel = self._actor.get_velocity()
         self.gps_data.velocity_x = vel.x
         self.gps_data.velocity_y = vel.y
-        self.gps_data.timestamp = self.current_time_ms
+        self.gps_data.timestamp = data.timestamp * 1000.0
 
     def _get_relative_objects(self):
         vehicles = self.world.get_actors().filter('vehicle.*')
@@ -110,13 +112,17 @@ class AutonomousDrivingSystem(BasicControl):
                 'accel_y': 0.0,
                 'distance': math.hypot(rx, ry),
                 'heading': heading,
-                'object_type': 0,  # CAR
-                'status': 0        # MOVING
+                'object_type': 0,
+                'status': 0
             })
         return objs
 
     def run_step(self):
-        self.current_time_ms += 50.0
+        if self.start_time_ms is None:
+            self.start_time_ms = self.world.get_snapshot().timestamp.elapsed_seconds * 1000.0
+
+        self.current_time_ms = self.world.get_snapshot().timestamp.elapsed_seconds * 1000.0
+
         time_data = TimeData(self.current_time_ms)
         ego_data = EGO.ego_vehicle_estimation(time_data, self.gps_data, self.imu_data, self.kf_state)
 
@@ -131,6 +137,30 @@ class AutonomousDrivingSystem(BasicControl):
         )
         lane_output = LANE.lane_selection(lane_data, ego_data)
 
+        # 정확한 거리 계산을 위한 앞바퀴 기준 거리 측정
+        vehicles = self.world.get_actors().filter("vehicle.*")
+        ego_tf = self._actor.get_transform()
+        ego_loc = ego_tf.location
+        ego_forward = ego_tf.get_forward_vector()
+        ego_bbox = self._actor.bounding_box
+        ego_front = ego_loc + ego_forward * ego_bbox.extent.x
+
+        min_distance = float('inf')
+        closest_vehicle_id = -1
+
+        for v in vehicles:
+            if v.id == self.ego_id:
+                continue
+            tf = v.get_transform()
+            loc = tf.location
+            forward = tf.get_forward_vector()
+            bbox = v.bounding_box
+            target_front = loc + forward * bbox.extent.x
+            dist = ego_front.distance(target_front)
+            if dist < min_distance:
+                min_distance = dist
+                closest_vehicle_id = v.id
+
         obj_dict_list = self._get_relative_objects()
         obj_list = [convert_dict_to_objectdata(d) for d in obj_dict_list]
 
@@ -162,30 +192,14 @@ class AutonomousDrivingSystem(BasicControl):
         self._update_spectator()
 
         # === Debugging Print ===
-<<<<<<< HEAD
-        print("======================================")
-        print(f"[EGO] Velocity: {ego_data.velocity_x:.2f} m/s | Accel: {ego_data.accel_x:.2f} m/s² | Heading: {ego_data.heading:.2f}°")
-        print(f"[ACC] Mode: {acc_mode.name} | ACC Accel: {acc_accel:.2f} m/s²")
-        # print(f"[AEB] Mode: {aeb_mode.name} | AEB Accel: {aeb_accel:.2f} m/s²")
-        # print(f"[LFA] Mode: {lfa_mode.name} | Steer_PID: {steer_pid:.2f}° | Steer_Stanley: {steer_sta:.2f}° | Final Steer: {steer_cmd:.2f}°")
-        #print(f"[CTRL] Throttle: {self.control.throttle:.2f} | Brake: {self.control.brake:.2f} | Steer: {self.control.steer:.2f}")
-        #print(f"[Filtered] {len(filtered)} objects")
-        #if filtered:
-        #    for i, obj in enumerate(filtered):
-        #        print(
-        #            f"  F{i}: ID={obj.object_id}, dist={obj.distance:.2f}, status={obj.status.name}, cell={obj.cell_id}")
-        #print(f"[Predicted] {len(predicted)} objects")
-        #print(f"[ACC Target] ID={acc_target.object_id}, Dist={acc_target.distance:.2f}, Mode={acc_mode.name}, Accel={acc_accel:.2f}")
-=======
-        # 기준 좌표 변환
-        ego_tf = self._actor.get_transform()
-        ego_loc = ego_tf.location
-        front_offset_x = 1.5  # 차량 앞바퀴 중심 오프셋 (예시값)
-        ref_x = ego_loc.x - front_offset_x
-        ref_y = ego_loc.y
-        print(f"[STEP2] ego.get_location() = ({ego_loc.x:.2f}, {ego_loc.y:.2f}) → 기준점 변환 후 ({ref_x:.2f}, {ref_y:.2f})")
+        elapsed_sec = int((self.current_time_ms - self.start_time_ms) // 1000)
+        gps_dt = abs(self.current_time_ms - self.gps_data.timestamp)
+        gt_vel = self._actor.get_velocity().x
+        vel_err = abs(gt_vel - ego_data.velocity_x)
+        imu_valid = abs(self.imu_data.accel_x) < 9.8
+        gps_valid = gps_dt <= 50.0
 
->>>>>>> develop
+        print(f"[STEP1][{elapsed_sec} sec] 정속 주행 확인 → Velocity = {ego_data.velocity_x:.2f} m/s")
 
     def reset(self):
         if hasattr(self, "_imu_sensor"):
@@ -201,4 +215,4 @@ class AutonomousDrivingSystem(BasicControl):
         tf = self._actor.get_transform()
         tf.location.x -= 10
         tf.location.z += 3
-        self.spectator.set_transform(tf)
\ No newline at end of file
+        self.spectator.set_transform(tf)
diff --git a/dev/Control/controller/__pycache__/engine_control.cpython-37.pyc b/dev/Control/controller/__pycache__/engine_control.cpython-37.pyc
index aed4ce397d48a1b51f1f45d5aaed33efb956451b..600fa3e83dda9d69da22601d8cb59ef5ea2cb33a 100644
GIT binary patch
delta 20
acmcb_bcu=EiI<m)0SHdYs%_+UX9NH+Oav+b

delta 20
acmcb_bcu=EiI<m)0SK(U6*h9aGXelDU<1Se

diff --git a/dev/Control/decision/__pycache__/adaptive_cruise_control.cpython-37.pyc b/dev/Control/decision/__pycache__/adaptive_cruise_control.cpython-37.pyc
index 9c5557e60df69490bad9aaa35f554b1de3a198b3..4da8e1f858b26489fe9270f35d326fea05ab5d46 100644
GIT binary patch
delta 152
zcmbO&JV}_>iI<m)0SG4dsb`$n$Xm?J$U3=^c^+2^TM0)BdkuFp(_~GSc5aaa=^#}M
z3>*%dceBi86l7{<s%5TWu3^Yxl3=K1NnxIx$tKIlGP#{i(~7m3DTS?>DVRZ%-4Cjb
kfdR_UbI@c?pEVN%ZrZ2skZXM%xMQ9@RAlGo&ulB00GOL82mk;8

delta 161
zcmbOvJX@I8iI<m)0SI0mSIRiOk++zck!5lt^E|E+jvDS1wq~Xj_Q{$o?c6F3=^#}M
z3@QgU?`E0HD9GH*RLfk$T*HvXB*9S2lEN}MlTDV9b#gnKrZZSuGgB~wCWjwX8v{f7
k4!PFXffi;kgY+CUnW2&o?9*q>1c99}#>&mF*j6wB03viMH2?qr

diff --git a/dev/Control/decision/__pycache__/ego_vehicle_estimation.cpython-37.pyc b/dev/Control/decision/__pycache__/ego_vehicle_estimation.cpython-37.pyc
index f0fd5864568bbd3030b18e32f50ad3e8eb6f1c54..3134114446a3f7054985d604f8c8a2efd3143566 100644
GIT binary patch
delta 41
ucmX>vdR~;*iI<m)0SH_JlrwTR^4{WLytVlShXEs_^JGb`d?4A$<pu!Z_6slo

delta 41
ucmX>vdR~;*iI<m)0SF?#D`w<v<h{kg7`6EYhXEs_(_~4md?4A$<pu!klM847

diff --git a/dev/Control/decision/__pycache__/target_selection.cpython-37.pyc b/dev/Control/decision/__pycache__/target_selection.cpython-37.pyc
index 53e03dd13d54fc7eef131eaba6f30456779ffee2..63786898c223daf94cf1c00b6bb89c0cf926cc5e 100644
GIT binary patch
delta 2169
zcmZ8i-H#Jh6rX!Low=R1({?)D?S243WY;R-@*&`ZfUt`}a6wo!*&v&`w=A@4ce$N4
z3*Jd%mc$oLAQK-XMB&M3VuBL?0Uk_zBP9CJ2Yobz#Q5MNL4RjvU64u6@1A?kx#xcL
z{7!$_^wnnfU_S2{_{MgRod0CgHMh!sxHfufpR}ZX#h5NO@(n&<G(;l<%^EPIxM9kS
zbgr1wrNk0@Y<RLaQZgs=@Oam5S4u7d3$lo5S+Y|`t@Qn`nsxKosuOR>9F~hk6=9n-
z=@9s6OhXPqI_m*}ag%97^Qs|P+0aa<60P63MQQou1CFQ~@0lOegY!MJb5R8~b2{Ca
zTbNl+hD*~TsH?d~Ff+cqre0Dm)+JDY)*G6w&(AK+*Mr7P{r%3u{1Oy-p%c{GvyBP@
zI<$|$lpoFUSKL169wa{Jndn=7qRW?sHpY#s?7hdK9hjOm(-2GB811IDVunHsnQoct
z^2I5#Xx_A|Mwkh>&aAM|!Q7CRZ-m)cv!Ug*qb;58H?Zn9RwXeh-&nQXgC(caRikBe
z)x9{az@`Fe^GItqGni$n2GYCQl>%uV$&7a4cj0xy0<2CeeHHf#vdvsrXpdlBeuc>_
zSvy;B<Xj7vQoG>K!*5}9u}*|V9FxKGA;whDEi{Y1A@f5<SPBX^OS*K6g&vZ5NXA=c
z99Y!eIs*%f(rwYw8?q31m=%X`#C{_z2W4HBr4=5Q+xuYm;;ny@<v0q*ekRh7BYjy3
zye@@59U%KcAJ3DGH~Lfdhko0o=ZbIpNEYBNYag3d0w2dH%c`!da3rkg)XhrJhxh4+
zR3Y&Xh;aZSAcK%0$Z)U@h#yZEb*i8%cm6OH8}(5aYLwswKrcIAZ#QNZ&YkNt0`(%9
zw-Jm*A6X-5MMV^SZH<g=CgTV}jo>AMEd*N$h$OW>MTMxS_Edkw?Kj-%9BOr~Ors<A
z5jGY@_EEMy`rY0$aRre^$^_F)ZZZ>m^O?t8PTUiWb3%tX7&%)X&x^1KZow*8l{9Wf
z?}~A69EoZvbpV6vC#c@}P6TW~l`xsR{snzM@1NTle-HQ93elvqwVT}ZWr`mo*beBW
zXP1Ht?Vg2UVJWCpk~ewgzH85yEKJery#(}Ls!Xt(U>Cs-g8c+G!P-k!lc$WIo3^f%
zRxc3!<Lnrm=8MZczIdr;63x{?S~@{+I69i$#ulT?*~vb7>t1G2HRQ}ZMJ0ESe#;J6
z=g<%WBifML5Dn+XGsiTG$$v1qklWn7ubpN#V9i`BrS3}`vphJL15;de7qbGmXh6%!
z%pS6X#Ng(AoeR_2LHn?D7PN6%EX+$MnVCikG++1|%w%no8w?zlV64uANPAcJD`L;m
z9PhR)7}rZ8Y<1PeTO77Gb%rqZc-oCEPSg9(rVFa6jV2wKdJ{1f2ZOf_OJ0MgZ7$ug
z^wgD-)t}-jh4?BZS!`vfV|)oyDf%YAt}6lqJSh`bAP&Ta_>c;On3jhS+p-Wk%wIvO
zS#5jtUYI?`Y@lrdO_};E8>Y0l%GKE*tp&0QWEIFNkX0b7KvsdQ0$ByJieaP`NXymX
zr_ypYMQNkDTY1f!RGa9hXMkEZsh}q%7?bvy0*#A$mB@G8(LwWo8o=TQ^yl?}{^8~z
z_#W+#9=aR4&qJ*ZDsrf}m|rE0f_v8F@sn@8eoSS_64!IQ-(i|QIYZ2!J!Fe_-botO
zbj*sLeQN6Xi4zm!Ndd<M_}_V-OPWqEedzSmkx3d(zB5ttl2&q(()33^7S6KQBfmJ$
zu16mi$4XT+fw&!@ahRzb8;<T4&xjcW*L>wgBlw-;PDialy-hF^eO}tQ(S+Km0t6dN
U7gItA(?WmoPg~5dab~f90pMHL#Q*>R

delta 1979
zcmZuyPiz!b7@s#YJM(7e-_Go`-L{khwZLM*h6r2~QYldo3$_IlB2dEH((b|nZ^s19
zo2(Hu#)PC~E*?mPt2c#%2jbnECK{8C@zjGD&z^|!_sx<}8#noW@4fHe``(-H_x7vF
zUnYV#e7~&W_tTy6l`}i;1vU2dy<H3MH~fY^tTlMU!OR-ggmvE(w%~WnbCtfPu-LFT
z_YF}NE-VrJ{RVWf1&wmUT}BS!A<`EC?6F`AT0Q*ccf|%G?Aa-HW@Y9TA}jfraUd9g
zC59X&j}!Tlak|TH{jIcFZH=A(E3=i|G)1Xp%H^Ajn3t5^v}#($Q(f`fEOW3%xrvsQ
zi<ym?s~lyi(vXIz`-tlM7>V{=_XHYOm1<f`lTV7Qwqi{iSv_R6yG@QIuW3l{D_?M=
z`9nC$hl7t2oGgI0+$za`(sI+yg7$8NdAFHxTctJDsTC!AEgV2@gNFwX3!{%X93~4<
zD1%L4G}53MCYta^wXBi`4=Sqiu*<Rt2_q!bTV~-Hs%T6@U?_qXg?=HzG{UMfiXw-!
zEKXw;i|DqV#qGn;$HnH4MYZq>YT72xr0`6{Kw*zJ+QncutKx#n#YVr0p{&{t=)&l1
z@=p=M8mlTcP0}jLh(%2y9TFzWc#xz6IO8B>2tqeef(%3GLyka3AzRWhAU>Z8RiF|v
zeAj=-n09mVJxv)4kG?NmW;<R+KggE=J@@LRcH`pp<>gKzl{-njhhQpy%id}A%xjm@
zmAqr`Jg}X#I|wESCJA;C>?WuaQ~>n>N!=)^>0~wk!G1H}%8#?De1*Tw_U4cIp=}?-
zq!}g})znR9qFoaf>j6ex_ZZjn&>3_&<7@;AOSkfAXEvTeOx=*LV~|yX<k4qN%Jipt
z{;XW9ZmNz>mRH@q`Jx+li$iTHwKxNL$tePZ;8lWyfS%d8DO0(h*3$(02wo$w30`bg
z+(L0*dts<YFX}rN+>i~idO2<6>+a-8Prq>s@?p;utDRIHp)|xvIh#*-`&c`l_vWVQ
z&Uy~TUA#(O{c}Qjnd+k-dH4_t?R=E~=&d+QiWOu&o6q=@-E{@dq+Zi+>5}F_%9<gh
zaz$@ha$VTaMMOogBbGm7RRsez%sk;7BE6^RIapU-R#N56PA%nvDpm_@6;^*`Y6i%?
z#;$Yll(kJ=V_FsnHw#ZFA8mYc^TyEa7hV>&YtJouONZ`)atI4ctb#&QZYF(QJ{pW3
z`h?0=;9*-Aeim&gzwh?|Wd}vskq8S`ehW<{zZQ&jx1<_qK!kB1WeAaEBY7gMi9Gah
zBx|}fQ=>W3j_GQ!im@7Plg<>zT{klnhgPN~#gUaGD@Rt2tQ=W6D9J%dj(Rz=@-EWy
zBJH{Vq+QvR)>MWvmvy}5(VQH|ca;oKcl%v7L5iYJ|F4S+7We52zn;@sO+UDlu3m3n
zLHmCm4o1(8NcsnOS|Xr7i2S>7yt@sP`W8v+e&-*c8Ts_Axl{A+%$$@iX^P%2_MN5W
zi&~0jz$Aa;=*)bdLd2e)y|8%d^yy=>vZ(A8iXvk4TfLwScsRB3&7kUgrK4vSkI&IC
zfA&~C?mr&$6j;q~RW7i@`LC6$?8|&MnvVA1ov7e(;CMMq!(&_XPowww5}fN*c`$z(
m33rAf-z8Ye&&S)xIi{UK0B6&siov<Xbe1ewEUD|vV*didf~x!g

diff --git a/dev/Control/decision/adaptive_cruise_control.py b/dev/Control/decision/adaptive_cruise_control.py
index 1b1d63a..4b704a7 100644
--- a/dev/Control/decision/adaptive_cruise_control.py
+++ b/dev/Control/decision/adaptive_cruise_control.py
@@ -57,7 +57,7 @@ def calculate_accel_for_distance_pid(mode: ACCMode, target_data: ACCTarget, ego_
     dist_prev_error = error
 
     accel = kp * error + ki * dist_integral + kd * d_err
-    accel = max(min(accel, 10.0), -10.0)
+    accel = max(-5.0, min(3.0, accel))
 
     if mode == ACCMode.STOP:
         if target_data.status == ObjectStatus.STOPPED and ego_data.velocity_x < 0.5:
@@ -79,7 +79,7 @@ def calculate_accel_for_speed_pid(ego_data: EgoData, lane_data: LaneSelectOutput
         target_speed = min(target_speed, 15.0)
 
     error = target_speed - ego_data.velocity_x
-    kp, ki, kd = 0.5, 0.1, 0.05
+    kp, ki, kd = 0.4, 0.03, 0.1
 
     speed_integral += error * delta_time
     d_err = (error - speed_prev_error) / (delta_time + 1e-5)
diff --git a/dev/Control/decision/arbitration.py b/dev/Control/decision/arbitration.py
index ff9475e..78c3f9e 100644
--- a/dev/Control/decision/arbitration.py
+++ b/dev/Control/decision/arbitration.py
@@ -1,5 +1,6 @@
 # arbitration.py
 from typing import Dict
+
 from decision.shared_types import AEBMode, VehicleControl
 
 # 상수 정의
diff --git a/dev/Control/decision/autonomous_emergency_brake.py b/dev/Control/decision/autonomous_emergency_brake.py
index 0545d35..67b1373 100644
--- a/dev/Control/decision/autonomous_emergency_brake.py
+++ b/dev/Control/decision/autonomous_emergency_brake.py
@@ -1,4 +1,4 @@
-# autonomous_emergency_brake.py
+# aeb.py
 # Python version of AEB module implementing:
 # - calculate_ttc_for_aeb
 # - aeb_mode_selection
diff --git a/dev/Control/decision/ego_vehicle_estimation.py b/dev/Control/decision/ego_vehicle_estimation.py
index f7df497..3cf854d 100644
--- a/dev/Control/decision/ego_vehicle_estimation.py
+++ b/dev/Control/decision/ego_vehicle_estimation.py
@@ -1,9 +1,5 @@
 import numpy as np
-<<<<<<< HEAD
-from shared_types import TimeData, GPSData, IMUData, EgoData, EgoVehicleKFState
-=======
 from decision.shared_types import TimeData, GPSData, IMUData, EgoData, EgoVehicleKFState
->>>>>>> develop
 
 # ───────────── 상수 정의 ─────────────
 GPS_VALID_TIME_MS = 50.0
@@ -125,4 +121,4 @@ def ego_vehicle_estimation(time_data: TimeData,
     ego.yaw_rate  = yaw_rate
     # ego.position_x/y/z는 항상 0
 
-    return ego
+    return ego
\ No newline at end of file
diff --git a/dev/Control/decision/lane_following_assist.py b/dev/Control/decision/lane_following_assist.py
index 828a09b..e8f32a7 100644
--- a/dev/Control/decision/lane_following_assist.py
+++ b/dev/Control/decision/lane_following_assist.py
@@ -1,4 +1,4 @@
-# lane_following_assist.py
+# lfa.py
 # Python version of LFA module implementing:
 # - lfa_mode_selection
 # - calculate_steer_in_low_speed_pid
diff --git a/dev/Control/decision/lane_selection.py b/dev/Control/decision/lane_selection.py
index a5673ab..ac8f5e4 100644
--- a/dev/Control/decision/lane_selection.py
+++ b/dev/Control/decision/lane_selection.py
@@ -7,7 +7,7 @@ from decision.shared_types import LaneData, EgoData, LaneSelectOutput, LaneChang
 
 # ===== 상수 정의 =====
 LANE_CURVE_THRESHOLD = 800.0
-LANE_CURVE_DIFF_THRESHOLD = 400.0
+LANE_CURVE_DIFF_THRESHOLD = 200.0
 
 # ===== Lane Selection 함수 =====
 def lane_selection(lane_data: LaneData, ego_data: EgoData) -> LaneSelectOutput:
diff --git a/dev/Control/decision/target_selection.py b/dev/Control/decision/target_selection.py
index 5a51b98..0758f01 100644
--- a/dev/Control/decision/target_selection.py
+++ b/dev/Control/decision/target_selection.py
@@ -1,9 +1,5 @@
 # target_selection.py
-# Python version of target_selection module
-# Implements:
-# - select_target_from_object_list
-# - predict_object_future_path
-# - select_targets_for_acc_aeb
+# Updated with Carla-based distance calculation
 
 import math
 from decision.shared_types import (
@@ -21,6 +17,10 @@ def normalize_heading(hdg):
         hdg += 360.0
     return hdg
 
+# ===== Carla 기반 거리 재계산을 위한 헬퍼 함수 =====
+def calculate_absolute_distance(ego_x, ego_y, target_x, target_y):
+    return math.sqrt((ego_x - target_x) ** 2 + (ego_y - target_y) ** 2)
+
 # ===== 함수 1: select_target_from_object_list =====
 def select_target_from_object_list(obj_list: List[ObjectData],
                                    ego_data: EgoData,
@@ -36,12 +36,14 @@ def select_target_from_object_list(obj_list: List[ObjectData],
         adjusted_threshold += abs(lane_info.heading_error) * heading_coeff
 
     for obj in obj_list:
-        if obj.distance > 200:
+        # Carla 기준 거리 재계산 (앞바퀴 기준이 포함된 좌표계 전제)
+        abs_distance = calculate_absolute_distance(ego_data.position_x, ego_data.position_y,
+                                                   obj.position_x, obj.position_y)
+        if abs_distance > 200:
             continue
 
         lateral_pos = obj.position_y - lane_info.lane_offset
         center_offset = abs(lateral_pos)
-
         quarter_w = lane_info.lane_width * 0.25
         three_qw = lane_info.lane_width * 0.75
 
@@ -58,12 +60,12 @@ def select_target_from_object_list(obj_list: List[ObjectData],
         status = obj.status
         if heading_diff >= 150:
             status = ObjectStatus.ONCOMING
-        elif abs(rel_vel) >= 0.2 or obj.distance < 40.0:
+        elif abs(rel_vel) >= 0.2 or abs_distance < 40.0:
             status = ObjectStatus.MOVING
         else:
             status = ObjectStatus.STATIONARY
 
-        adjusted_distance = obj.distance
+        adjusted_distance = abs_distance
         if lane_info.is_curved_lane:
             heading_rad = lane_info.heading_error * math.pi / 180.0
             cos_val = math.cos(heading_rad)
@@ -179,7 +181,7 @@ def select_targets_for_acc_aeb(ego_data: EgoData,
         py = obj.position_y
 
         # ACC 후보
-        if abs(py) <= 1.75 and obj.object_type == ObjectType.CAR and obj.status in [ObjectStatus.MOVING, ObjectStatus.STOPPED]:
+        if abs(py) <= 2.5 and obj.status != ObjectStatus.ONCOMING:
             score = 200 - obj.distance
             if lane_info.is_curved_lane and obj.cell_id < 5:
                 score += 10
diff --git a/dev/Scenario/ACC/ACC_S001.xosc b/dev/Scenario/ACC/ACC_S001.xosc
index 34f179e..610fe9a 100644
--- a/dev/Scenario/ACC/ACC_S001.xosc
+++ b/dev/Scenario/ACC/ACC_S001.xosc
@@ -1,34 +1,61 @@
 <?xml version="1.0"?>
 <OpenSCENARIO>
-  <FileHeader revMajor="1" revMinor="0" date="2025-05-13" description="ACC_S001: 전방 차량 없음, 목표 속도 유지 시나리오" author="JSH"/>
-
+  <FileHeader revMajor="1" revMinor="0" date="2025-05-16" description="ACC_S001" author="JSH" />
   <ParameterDeclarations>
-    <ParameterDeclaration name="egoXinitposition" parameterType="double" value="0"/>
-    <ParameterDeclaration name="egoYinitposition" parameterType="double" value="0"/>
-    <ParameterDeclaration name="ego_height" parameterType="double" value="28"/>
-  </ParameterDeclarations>
+    <ParameterDeclaration name="k10" parameterType="double" value="2.78" />
+    <ParameterDeclaration name="k20" parameterType="double" value="5.56" />
+    <ParameterDeclaration name="k30" parameterType="double" value="8.33" />
+    <ParameterDeclaration name="k40" parameterType="double" value="11.11" />
+    <ParameterDeclaration name="k50" parameterType="double" value="13.89" />
+    <ParameterDeclaration name="k60" parameterType="double" value="16.67" />
+    <ParameterDeclaration name="k70" parameterType="double" value="19.44" />
+    <ParameterDeclaration name="k80" parameterType="double" value="22.22" />
+    <ParameterDeclaration name="k90" parameterType="double" value="25.0" />
+    <ParameterDeclaration name="k100" parameterType="double" value="27.78" />
+    <ParameterDeclaration name="k110" parameterType="double" value="30.56" />
+    <ParameterDeclaration name="k120" parameterType="double" value="33.33" />
+
+    <ParameterDeclaration name="egoinitspeed" parameterType="double" value="14" />
+    <ParameterDeclaration name="targetinitspeed" parameterType="double" value="14" />
+
+    <ParameterDeclaration name="egoXinitposition" parameterType="double" value="0" />
+    <ParameterDeclaration name="egoYinitposition" parameterType="double" value="3.5" />
 
-  <CatalogLocations/>
+    <ParameterDeclaration name="targetXinitposition" parameterType="double" value="10" />
+    <ParameterDeclaration name="targetYinitposition" parameterType="double" value="0" />
+
+    <ParameterDeclaration name="ego_height" parameterType="double" value="28" />
+
+    <ParameterDeclaration name="weather_condition" parameterType="string" value="rain" />
+    <ParameterDeclaration name="precipitationType_intensity" parameterType="double" value="1.0" />
+    <ParameterDeclaration name="cloud_State" parameterType="string" value="free" />
+    <ParameterDeclaration name="fog_range" parameterType="double" value="100.0" />
+
+  </ParameterDeclarations>
 
+  <CatalogLocations />
   <RoadNetwork>
-    <LogicFile filepath="Map1"/>
-    <SceneGraphFile filepath=""/>
+    <LogicFile filepath="Map1" />
+    <SceneGraphFile filepath="" />
   </RoadNetwork>
 
   <Entities>
     <ScenarioObject name="hero">
       <Vehicle name="vehicle.pass.white.k5" vehicleCategory="car">
-        <Performance maxSpeed="69.444" maxAcceleration="10.0" maxDeceleration="10.0"/>
+        <ParameterDeclarations />
+        <Performance maxSpeed="69.444" maxAcceleration="10.0" maxDeceleration="10.0" />
         <BoundingBox>
-          <Center x="1.5" y="0.0" z="0.9"/>
-          <Dimensions width="2.1" length="4.5" height="1.8"/>
+          <Center x="1.5" y="0.0" z="0.9" />
+          <Dimensions width="2.1" length="4.5" height="1.8" />
         </BoundingBox>
         <Axles>
-          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1" positionZ="0.3"/>
-          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0" positionZ="0.3"/>
+          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1"
+            positionZ="0.3" />
+          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0"
+            positionZ="0.3" />
         </Axles>
         <Properties>
-          <Property name="type" value="ego_vehicle"/>
+          <Property name="type" value="ego_vehicle" />
         </Properties>
       </Vehicle>
     </ScenarioObject>
@@ -39,14 +66,15 @@
       <Actions>
         <GlobalAction>
           <EnvironmentAction>
-            <Environment name="DefaultWeather">
-              <TimeOfDay animation="false" dateTime="2025-05-13T12:00:00"/>
-              <Weather cloudState="free">
-                <Sun intensity="10000" azimuth="0" elevation="1.57"/>
-                <Fog visualRange="10000.0"/>
-                <Precipitation precipitationType="dry" intensity="0.0"/>
+            <Environment name="Environment1">
+              <TimeOfDay animation="true" dateTime="2022-10-01T12:00:00" />
+              <Weather cloudState="$cloud_State">
+                <Sun intensity="10000" azimuth="0" elevation="1.57" />
+                <Fog visualRange="10000.0" />
+                <Precipitation precipitationType="$weather_condition"
+                  intensity="$precipitationType_intensity" />
               </Weather>
-              <RoadCondition frictionScaleFactor="1.0"/>
+              <RoadCondition frictionScaleFactor="1.0" />
             </Environment>
           </EnvironmentAction>
         </GlobalAction>
@@ -55,7 +83,8 @@
           <PrivateAction>
             <TeleportAction>
               <Position>
-                <WorldPosition x="$egoXinitposition" y="$egoYinitposition" z="$ego_height" h="0" p="0" r="0"/>
+                <WorldPosition x="$egoXinitposition" y="$egoYinitposition" z="$ego_height" h="0"
+                  p="0" r="0" />
               </Position>
             </TeleportAction>
           </PrivateAction>
@@ -65,39 +94,40 @@
               <AssignControllerAction>
                 <Controller name="HeroAgent">
                   <Properties>
-                    <Property name="module" value="autonomous_driving_system"/>
+                    <Property name="module" value="autonomous_driving_system" />
                   </Properties>
                 </Controller>
               </AssignControllerAction>
               <OverrideControllerValueAction>
-                <Throttle value="0" active="false"/>
-                <Brake value="0" active="false"/>
-                <Clutch value="0" active="false"/>
-                <ParkingBrake value="0" active="false"/>
-                <SteeringWheel value="0" active="false"/>
-                <Gear number="0" active="false"/>
+                <Throttle value="0" active="false" />
+                <Brake value="0" active="false" />
+                <Clutch value="0" active="false" />
+                <ParkingBrake value="0" active="false" />
+                <SteeringWheel value="0" active="false" />
+                <Gear number="0" active="false" />
               </OverrideControllerValueAction>
             </ControllerAction>
           </PrivateAction>
         </Private>
+
       </Actions>
     </Init>
-
-    <Story name="ACC_Speed_Control_Story">
-      <Act name="ACC_Speed_Act">
-        <ManeuverGroup name="EgoGroup" maximumExecutionCount="1">
+    <Story name="MyStory">
+      <Act name="Speedupall">
+        <ManeuverGroup maximumExecutionCount="1" name="Speedupall">
           <Actors selectTriggeringEntities="false">
             <EntityRef entityRef="hero"/>
           </Actors>
-          <Maneuver name="AccelerateToTargetSpeed">
-            <Event name="StartDriving" priority="overwrite">
-              <Action name="SetTargetSpeed">
+          <Maneuver name="AllSpeedUp">
+            <Event name="AllSpeedUpEvent" priority="overwrite">
+              <Action name="AllSpeedUpAction">
                 <PrivateAction>
                   <LongitudinalAction>
                     <SpeedAction>
-                      <SpeedActionDynamics dynamicsShape="linear" value="30" dynamicsDimension="time"/>
+                      <SpeedActionDynamics dynamicsShape="linear" value="2000"
+                        dynamicsDimension="distance" />
                       <SpeedActionTarget>
-                        <AbsoluteTargetSpeed value="22.22"/>
+                        <AbsoluteTargetSpeed value="15" />
                       </SpeedActionTarget>
                     </SpeedAction>
                   </LongitudinalAction>
@@ -105,22 +135,31 @@
               </Action>
               <StartTrigger>
                 <ConditionGroup>
-                  <Condition name="SimulationStart" delay="0" conditionEdge="rising">
+                  <Condition name="AtSimulationStarts" delay="0" conditionEdge="rising">
                     <ByValueCondition>
-                      <SimulationTimeCondition value="0" rule="greaterThan"/>
+                      <SimulationTimeCondition value="0" rule="greaterThan" />
                     </ByValueCondition>
                   </Condition>
                 </ConditionGroup>
               </StartTrigger>
+              <!-- <StopTrigger>
+                <ConditionGroup>
+                  <Condition name="EndCondition" delay="1" conditionEdge="rising">
+                    <ByValueCondition>
+                      <SimulationTimeCondition value="5" rule="greaterThan" />
+                    </ByValueCondition>
+                  </Condition>
+                </ConditionGroup>
+              </StopTrigger> -->
             </Event>
           </Maneuver>
         </ManeuverGroup>
 
         <StartTrigger>
           <ConditionGroup>
-            <Condition name="StartImmediately" delay="0" conditionEdge="rising">
+            <Condition name="AtSimulationStarts" delay="0" conditionEdge="rising">
               <ByValueCondition>
-                <SimulationTimeCondition value="0" rule="greaterThan"/>
+                <SimulationTimeCondition value="0" rule="greaterThan" />
               </ByValueCondition>
             </Condition>
           </ConditionGroup>
@@ -130,12 +169,12 @@
 
     <StopTrigger>
       <ConditionGroup>
-        <Condition name="StopAfterDuration" delay="0" conditionEdge="rising">
+        <Condition name="EndCondition" delay="1" conditionEdge="rising">
           <ByValueCondition>
-            <SimulationTimeCondition value="20" rule="greaterThan"/>
+            <SimulationTimeCondition value="20.0" rule="greaterThan" />
           </ByValueCondition>
         </Condition>
       </ConditionGroup>
     </StopTrigger>
   </Storyboard>
-</OpenSCENARIO>
+</OpenSCENARIO>
\ No newline at end of file
diff --git a/dev/Scenario/ACC/ACC_S002.xosc b/dev/Scenario/ACC/ACC_S002.xosc
index 2f8d73a..be0ba92 100644
--- a/dev/Scenario/ACC/ACC_S002.xosc
+++ b/dev/Scenario/ACC/ACC_S002.xosc
@@ -1,52 +1,74 @@
 <?xml version="1.0"?>
 <OpenSCENARIO>
-  <FileHeader revMajor="1" revMinor="0" date="2025-05-13" description="ACC_S002: 전방 차량 감지 시 거리 유지 모드 전환 시나리오" author="JSH"/>
+  <FileHeader revMajor="1" revMinor="0" date="2025-05-16" description="ACC_S002" author="JSH" />
 
   <ParameterDeclarations>
-    <ParameterDeclaration name="egoXinitposition" parameterType="double" value="0.0"/>
-    <ParameterDeclaration name="targetXinitposition" parameterType="double" value="50.0"/>
-    <ParameterDeclaration name="egoYinitposition" parameterType="double" value="0.0"/>
-    <ParameterDeclaration name="ego_height" parameterType="double" value="28"/>
-  </ParameterDeclarations>
+    <ParameterDeclaration name="k10" parameterType="double" value="2.78" />
+    <ParameterDeclaration name="k20" parameterType="double" value="5.56" />
+    <ParameterDeclaration name="k30" parameterType="double" value="8.33" />
+    <ParameterDeclaration name="k40" parameterType="double" value="11.11" />
+    <ParameterDeclaration name="k50" parameterType="double" value="13.89" />
+    <ParameterDeclaration name="k60" parameterType="double" value="16.67" />
+    <ParameterDeclaration name="k70" parameterType="double" value="19.44" />
+    <ParameterDeclaration name="k80" parameterType="double" value="22.22" />
+    <ParameterDeclaration name="k90" parameterType="double" value="25.0" />
+    <ParameterDeclaration name="k100" parameterType="double" value="27.78" />
+    <ParameterDeclaration name="k110" parameterType="double" value="30.56" />
+    <ParameterDeclaration name="k120" parameterType="double" value="33.33" />
+
+    <ParameterDeclaration name="egoinitspeed" parameterType="double" value="14" />
+    <ParameterDeclaration name="targetinitspeed" parameterType="double" value="14.0" />
 
-  <CatalogLocations/>
+    <ParameterDeclaration name="egoXinitposition" parameterType="double" value="0" />
+    <ParameterDeclaration name="egoYinitposition" parameterType="double" value="0" />
+    <ParameterDeclaration name="targetXinitposition" parameterType="double" value="80" />
+    <ParameterDeclaration name="targetYinitposition" parameterType="double" value="0" />
+    <ParameterDeclaration name="ego_height" parameterType="double" value="28" />
+
+    <ParameterDeclaration name="weather_condition" parameterType="string" value="rain" />
+    <ParameterDeclaration name="precipitationType_intensity" parameterType="double" value="1.0" />
+    <ParameterDeclaration name="cloud_State" parameterType="string" value="free" />
+    <ParameterDeclaration name="fog_range" parameterType="double" value="100.0" />
+  </ParameterDeclarations>
 
+  <CatalogLocations />
   <RoadNetwork>
-    <LogicFile filepath="Map1"/>
-    <SceneGraphFile filepath=""/>
+    <LogicFile filepath="Map1" />
+    <SceneGraphFile filepath="" />
   </RoadNetwork>
 
   <Entities>
     <ScenarioObject name="hero">
       <Vehicle name="vehicle.pass.white.k5" vehicleCategory="car">
-        <Performance maxSpeed="69.444" maxAcceleration="10.0" maxDeceleration="10.0"/>
+        <Performance maxSpeed="69.444" maxAcceleration="10.0" maxDeceleration="10.0" />
         <BoundingBox>
-          <Center x="1.5" y="0.0" z="0.9"/>
-          <Dimensions width="2.1" length="4.5" height="1.8"/>
+          <Center x="1.5" y="0.0" z="0.9" />
+          <Dimensions width="2.1" length="4.5" height="1.8" />
         </BoundingBox>
         <Axles>
-          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1" positionZ="0.3"/>
-          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0" positionZ="0.3"/>
+          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1" positionZ="0.3" />
+          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0" positionZ="0.3" />
         </Axles>
         <Properties>
-          <Property name="type" value="ego_vehicle"/>
+          <Property name="type" value="ego_vehicle" />
         </Properties>
       </Vehicle>
     </ScenarioObject>
 
-    <ScenarioObject name="front_vehicle">
+    <!-- 추가된 전방 차량 -->
+    <ScenarioObject name="target">
       <Vehicle name="vehicle.pass.white.k5" vehicleCategory="car">
-        <Performance maxSpeed="50.0" maxAcceleration="10.0" maxDeceleration="10.0"/>
+        <Performance maxSpeed="69.444" maxAcceleration="5.0" maxDeceleration="5.0" />
         <BoundingBox>
-          <Center x="1.5" y="0.0" z="0.9"/>
-          <Dimensions width="2.1" length="4.5" height="1.8"/>
+          <Center x="1.5" y="0.0" z="0.9" />
+          <Dimensions width="2.1" length="4.5" height="1.8" />
         </BoundingBox>
         <Axles>
-          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1" positionZ="0.3"/>
-          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0" positionZ="0.3"/>
+          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1" positionZ="0.3" />
+          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0" positionZ="0.3" />
         </Axles>
         <Properties>
-          <Property name="type" value="npc_vehicle"/>
+          <Property name="type" value="target_vehicle" />
         </Properties>
       </Vehicle>
     </ScenarioObject>
@@ -55,93 +77,90 @@
   <Storyboard>
     <Init>
       <Actions>
+        <GlobalAction>
+          <EnvironmentAction>
+            <Environment name="Environment1">
+              <TimeOfDay animation="true" dateTime="2022-10-01T12:00:00" />
+              <Weather cloudState="$cloud_State">
+                <Sun intensity="10000" azimuth="0" elevation="1.57" />
+                <Fog visualRange="10000.0" />
+                <Precipitation precipitationType="$weather_condition" intensity="$precipitationType_intensity" />
+              </Weather>
+              <RoadCondition frictionScaleFactor="1.0" />
+            </Environment>
+          </EnvironmentAction>
+        </GlobalAction>
+
         <Private entityRef="hero">
           <PrivateAction>
             <TeleportAction>
               <Position>
-                <WorldPosition x="$egoXinitposition" y="$egoYinitposition" z="$ego_height" h="0" p="0" r="0"/>
+                <WorldPosition x="$egoXinitposition" y="$egoYinitposition" z="$ego_height" h="0" p="0" r="0" />
               </Position>
             </TeleportAction>
           </PrivateAction>
+
           <PrivateAction>
             <ControllerAction>
               <AssignControllerAction>
                 <Controller name="HeroAgent">
                   <Properties>
-                    <Property name="module" value="autonomous_driving_system"/>
+                    <Property name="module" value="autonomous_driving_system" />
                   </Properties>
                 </Controller>
               </AssignControllerAction>
               <OverrideControllerValueAction>
-                <Throttle value="0" active="false"/>
-                <Brake value="0" active="false"/>
-                <Clutch value="0" active="false"/>
-                <ParkingBrake value="0" active="false"/>
-                <SteeringWheel value="0" active="false"/>
-                <Gear number="0" active="false"/>
+                <Throttle value="0" active="false" />
+                <Brake value="0" active="false" />
+                <Clutch value="0" active="false" />
+                <ParkingBrake value="0" active="false" />
+                <SteeringWheel value="0" active="false" />
+                <Gear number="0" active="false" />
               </OverrideControllerValueAction>
             </ControllerAction>
           </PrivateAction>
         </Private>
 
-        <Private entityRef="front_vehicle">
+        <!-- 타겟 차량 초기화 -->
+        <Private entityRef="target">
           <PrivateAction>
             <TeleportAction>
               <Position>
-                <WorldPosition x="$targetXinitposition" y="$egoYinitposition" z="$ego_height" h="0" p="0" r="0"/>
+                <WorldPosition x="$targetXinitposition" y="$targetYinitposition" z="$ego_height" h="0" p="0" r="0" />
               </Position>
             </TeleportAction>
           </PrivateAction>
+          <PrivateAction>
+            <LongitudinalAction>
+              <SpeedAction>
+                <SpeedActionDynamics dynamicsShape="step" value="0" dynamicsDimension="time" />
+                <SpeedActionTarget>
+                  <AbsoluteTargetSpeed value="$targetinitspeed" />
+                </SpeedActionTarget>
+              </SpeedAction>
+            </LongitudinalAction>
+          </PrivateAction>
         </Private>
+
       </Actions>
     </Init>
 
-    <Story name="ACC_Distance_Control_Story">
-      <Act name="ACC_Distance_Act">
-        <ManeuverGroup name="EgoGroup" maximumExecutionCount="1">
-          <Actors selectTriggeringEntities="false">
-            <EntityRef entityRef="hero"/>
-          </Actors>
-          <Maneuver name="EgoStartManeuver">
-            <Event name="EgoAccelerate" priority="overwrite">
-              <Action name="SetInitialSpeed">
-                <PrivateAction>
-                  <LongitudinalAction>
-                    <SpeedAction>
-                      <SpeedActionDynamics dynamicsShape="linear" value="30" dynamicsDimension="time"/>
-                      <SpeedActionTarget>
-                        <AbsoluteTargetSpeed value="15.0"/>
-                      </SpeedActionTarget>
-                    </SpeedAction>
-                  </LongitudinalAction>
-                </PrivateAction>
-              </Action>
-              <StartTrigger>
-                <ConditionGroup>
-                  <Condition name="SimStart" delay="0" conditionEdge="rising">
-                    <ByValueCondition>
-                      <SimulationTimeCondition value="0.0" rule="greaterThan"/>
-                    </ByValueCondition>
-                  </Condition>
-                </ConditionGroup>
-              </StartTrigger>
-            </Event>
-          </Maneuver>
-        </ManeuverGroup>
-
-        <ManeuverGroup name="FrontVehicleGroup" maximumExecutionCount="1">
+    <!-- 기존 시나리오 -->
+    <Story name="MyStory">
+      <Act name="Speedupall">
+        <ManeuverGroup maximumExecutionCount="1" name="Speedupall">
           <Actors selectTriggeringEntities="false">
-            <EntityRef entityRef="front_vehicle"/>
+            <EntityRef entityRef="hero" />
           </Actors>
-          <Maneuver name="FrontVehicleCruise">
-            <Event name="MaintainConstantSpeed" priority="overwrite">
-              <Action name="ConstantSpeed">
+          <Maneuver name="AllSpeedUp">
+            <Event name="AllSpeedUpEvent" priority="overwrite">
+              <Action name="AllSpeedUpAction">
                 <PrivateAction>
                   <LongitudinalAction>
                     <SpeedAction>
-                      <SpeedActionDynamics dynamicsShape="linear" value="30" dynamicsDimension="time"/>
+                      <SpeedActionDynamics dynamicsShape="linear" value="2000" dynamicsDimension="distance" />
                       <SpeedActionTarget>
-                        <AbsoluteTargetSpeed value="13.0"/>
+                        <AbsoluteTargetSpeed value="15" />
                       </SpeedActionTarget>
                     </SpeedAction>
                   </LongitudinalAction>
@@ -149,9 +168,9 @@
               </Action>
               <StartTrigger>
                 <ConditionGroup>
-                  <Condition name="SimStart" delay="0" conditionEdge="rising">
+                  <Condition name="AtSimulationStarts" delay="0" conditionEdge="rising">
                     <ByValueCondition>
-                      <SimulationTimeCondition value="0.0" rule="greaterThan"/>
+                      <SimulationTimeCondition value="0" rule="greaterThan" />
                     </ByValueCondition>
                   </Condition>
                 </ConditionGroup>
@@ -162,9 +181,9 @@
 
         <StartTrigger>
           <ConditionGroup>
-            <Condition name="StartImmediately" delay="0" conditionEdge="rising">
+            <Condition name="AtSimulationStarts" delay="0" conditionEdge="rising">
               <ByValueCondition>
-                <SimulationTimeCondition value="0.0" rule="greaterThan"/>
+                <SimulationTimeCondition value="0" rule="greaterThan" />
               </ByValueCondition>
             </Condition>
           </ConditionGroup>
@@ -172,11 +191,12 @@
       </Act>
     </Story>
 
+    <!-- 시나리오 종료 -->
     <StopTrigger>
       <ConditionGroup>
-        <Condition name="StopAfter20s" delay="0" conditionEdge="rising">
+        <Condition name="EndCondition" delay="1" conditionEdge="rising">
           <ByValueCondition>
-            <SimulationTimeCondition value="20.0" rule="greaterThan"/>
+            <SimulationTimeCondition value="25.0" rule="greaterThan" />
           </ByValueCondition>
         </Condition>
       </ConditionGroup>
diff --git a/dev/Scenario/EGO/EGO_S001.xosc b/dev/Scenario/EGO/EGO_S001.xosc
index f062618..39e56fe 100644
--- a/dev/Scenario/EGO/EGO_S001.xosc
+++ b/dev/Scenario/EGO/EGO_S001.xosc
@@ -1,19 +1,11 @@
 <?xml version="1.0"?>
 <OpenSCENARIO>
-<<<<<<< HEAD:dev/Scenario/ACC_S001.xosc
-  <FileHeader revMajor="1" revMinor="0" date="2025-05-11" description="ACC_S001: 전방 차량 없음, ADAS ACC 목표 속도 유지 시나리오" author="JSH"/>
-=======
   <FileHeader revMajor="1" revMinor="0" date="2025-05-11" description="EGO_S001: Ego 차량 좌표 기준 고정 및 앞바퀴 중심 기준 검증 시나리오" author="JSH"/>
->>>>>>> develop:dev/Scenario/EGO/EGO_S001.xosc
 
   <ParameterDeclarations>
     <ParameterDeclaration name="egoXinitposition" parameterType="double" value="0"/>
     <ParameterDeclaration name="egoYinitposition" parameterType="double" value="0"/>
     <ParameterDeclaration name="ego_height" parameterType="double" value="28"/>
-    <ParameterDeclaration name="weather_condition" parameterType="string" value="rain"/>
-    <ParameterDeclaration name="precipitationType_intensity" parameterType="double" value="1.0"/>
-    <ParameterDeclaration name="cloud_State" parameterType="string" value="free"/>
-    <ParameterDeclaration name="fog_range" parameterType="double" value="100.0"/>
   </ParameterDeclarations>
 
   <CatalogLocations/>
@@ -40,8 +32,6 @@
         </Properties>
       </Vehicle>
     </ScenarioObject>
-<<<<<<< HEAD:dev/Scenario/ACC_S001.xosc
-=======
 
     <ScenarioObject name="target">
       <Vehicle name="vehicle.pass.white.k5" vehicleCategory="car">
@@ -59,7 +49,6 @@
         </Properties>
       </Vehicle>
     </ScenarioObject>
->>>>>>> develop:dev/Scenario/EGO/EGO_S001.xosc
   </Entities>
 
   <Storyboard>
@@ -67,21 +56,12 @@
       <Actions>
         <GlobalAction>
           <EnvironmentAction>
-<<<<<<< HEAD:dev/Scenario/ACC_S001.xosc
-            <Environment name="Environment1">
-              <TimeOfDay animation="true" dateTime="2022-10-01T12:00:00"/>
-              <Weather cloudState="$cloud_State">
-                <Sun intensity="10000" azimuth="0" elevation="1.57"/>
-                <Fog visualRange="10000.0"/>
-                <Precipitation precipitationType="$weather_condition" intensity="$precipitationType_intensity"/>
-=======
             <Environment name="DryClearDay">
               <TimeOfDay animation="true" dateTime="2025-05-11T12:00:00"/>
               <Weather cloudState="free">
                 <Sun intensity="10000" azimuth="0" elevation="1.57"/>
                 <Fog visualRange="10000.0"/>
                 <Precipitation precipitationType="dry" intensity="0.0"/>
->>>>>>> develop:dev/Scenario/EGO/EGO_S001.xosc
               </Weather>
               <RoadCondition frictionScaleFactor="1.0"/>
             </Environment>
@@ -117,26 +97,6 @@
             </ControllerAction>
           </PrivateAction>
         </Private>
-<<<<<<< HEAD:dev/Scenario/ACC_S001.xosc
-      </Actions>
-    </Init>
-
-    <Story name="ACC_TargetSpeed">
-      <Act name="MaintainSpeed">
-        <ManeuverGroup maximumExecutionCount="1" name="ACC_MG">
-          <Actors selectTriggeringEntities="false">
-            <EntityRef entityRef="hero"/>
-          </Actors>
-          <Maneuver name="ACC_Idle">
-            <Event name="ACC_Trigger" priority="overwrite">
-              <Action name="NoAction">
-                <PrivateAction>
-                  <LongitudinalAction>
-                    <SpeedAction>
-                      <SpeedActionDynamics dynamicsShape="linear" value="30" dynamicsDimension="time"/>
-                      <SpeedActionTarget>
-                        <AbsoluteTargetSpeed value="0.0"/>
-=======
 
         <Private entityRef="target">
           <PrivateAction>
@@ -165,7 +125,6 @@
                       <SpeedActionDynamics dynamicsShape="linear" value="10" dynamicsDimension="time"/>
                       <SpeedActionTarget>
                         <AbsoluteTargetSpeed value="5.0"/>
->>>>>>> develop:dev/Scenario/EGO/EGO_S001.xosc
                       </SpeedActionTarget>
                     </SpeedAction>
                   </LongitudinalAction>
@@ -198,18 +157,12 @@
 
     <StopTrigger>
       <ConditionGroup>
-<<<<<<< HEAD:dev/Scenario/ACC_S001.xosc
-        <Condition name="EndScenario" delay="1" conditionEdge="rising">
-          <ByValueCondition>
-            <SimulationTimeCondition value="30" rule="greaterThan"/>
-=======
         <Condition name="EndScenario" delay="0" conditionEdge="rising">
           <ByValueCondition>
             <SimulationTimeCondition value="15" rule="greaterThan"/>
->>>>>>> develop:dev/Scenario/EGO/EGO_S001.xosc
           </ByValueCondition>
         </Condition>
       </ConditionGroup>
     </StopTrigger>
   </Storyboard>
-</OpenSCENARIO>
\ No newline at end of file
+</OpenSCENARIO>
diff --git a/dev/Scenario/EGO/EGO_S002.xosc b/dev/Scenario/EGO/EGO_S002.xosc
index 8ff2464..22643ec 100644
--- a/dev/Scenario/EGO/EGO_S002.xosc
+++ b/dev/Scenario/EGO/EGO_S002.xosc
@@ -95,7 +95,7 @@
                 <PrivateAction>
                   <LongitudinalAction>
                     <SpeedAction>
-                      <SpeedActionDynamics dynamicsShape="linear" value="10" dynamicsDimension="time"/>
+                      <SpeedActionDynamics dynamicsShape="linear" value="30" dynamicsDimension="time"/>
                       <SpeedActionTarget>
                         <AbsoluteTargetSpeed value="15.0"/>
                       </SpeedActionTarget>
diff --git a/dev/Scenario/EGO/EGO_S003.xosc b/dev/Scenario/EGO/EGO_S003.xosc
index e8df742..5306f17 100644
--- a/dev/Scenario/EGO/EGO_S003.xosc
+++ b/dev/Scenario/EGO/EGO_S003.xosc
@@ -1,34 +1,40 @@
 <?xml version="1.0"?>
 <OpenSCENARIO>
-  <FileHeader revMajor="1" revMinor="0" date="2025-05-11" description="EGO_S003: GPS 무효 상태에서의 동기화 및 속도 추정 유지 검증 시나리오" author="JSH"/>
-
+  <FileHeader revMajor="1" revMinor="0" date="2025-05-17" description="EGO_S003" author="JSH" />
   <ParameterDeclarations>
-    <ParameterDeclaration name="egoXinitposition" parameterType="double" value="0"/>
-    <ParameterDeclaration name="egoYinitposition" parameterType="double" value="0"/>
-    <ParameterDeclaration name="ego_height" parameterType="double" value="28"/>
-  </ParameterDeclarations>
+    <ParameterDeclaration name="egoinitspeed" parameterType="double" value="14" />
+    <ParameterDeclaration name="egoXinitposition" parameterType="double" value="0" />
+    <ParameterDeclaration name="egoYinitposition" parameterType="double" value="3.5" />
+    <ParameterDeclaration name="ego_height" parameterType="double" value="28" />
 
-  <CatalogLocations/>
+    <!-- 날씨: 맑음, 센서 동작 안정화 목적 -->
+    <ParameterDeclaration name="weather_condition" parameterType="string" value="dry" />
+    <ParameterDeclaration name="precipitationType_intensity" parameterType="double" value="0.0" />
+    <ParameterDeclaration name="cloud_State" parameterType="string" value="free" />
+    <ParameterDeclaration name="fog_range" parameterType="double" value="10000.0" />
+  </ParameterDeclarations>
 
+  <CatalogLocations />
   <RoadNetwork>
-    <LogicFile filepath="Map1"/>
-    <SceneGraphFile filepath=""/>
+    <LogicFile filepath="Map1" />
+    <SceneGraphFile filepath="" />
   </RoadNetwork>
 
   <Entities>
     <ScenarioObject name="hero">
       <Vehicle name="vehicle.pass.white.k5" vehicleCategory="car">
-        <Performance maxSpeed="69.444" maxAcceleration="10.0" maxDeceleration="10.0"/>
+        <ParameterDeclarations />
+        <Performance maxSpeed="69.444" maxAcceleration="10.0" maxDeceleration="10.0" />
         <BoundingBox>
-          <Center x="1.5" y="0.0" z="0.9"/>
-          <Dimensions width="2.1" length="4.5" height="1.8"/>
+          <Center x="1.5" y="0.0" z="0.9" />
+          <Dimensions width="2.1" length="4.5" height="1.8" />
         </BoundingBox>
         <Axles>
-          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1" positionZ="0.3"/>
-          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0" positionZ="0.3"/>
+          <FrontAxle maxSteering="0.5" wheelDiameter="0.6" trackWidth="1.8" positionX="3.1" positionZ="0.3" />
+          <RearAxle maxSteering="0.0" wheelDiameter="0.6" trackWidth="1.8" positionX="0.0" positionZ="0.3" />
         </Axles>
         <Properties>
-          <Property name="type" value="ego_vehicle"/>
+          <Property name="type" value="ego_vehicle" />
         </Properties>
       </Vehicle>
     </ScenarioObject>
@@ -39,14 +45,14 @@
       <Actions>
         <GlobalAction>
           <EnvironmentAction>
-            <Environment name="DryClearDay">
-              <TimeOfDay animation="true" dateTime="2025-05-11T12:00:00"/>
-              <Weather cloudState="free">
-                <Sun intensity="10000" azimuth="0" elevation="1.57"/>
-                <Fog visualRange="10000.0"/>
-                <Precipitation precipitationType="dry" intensity="0.0"/>
+            <Environment name="Environment1">
+              <TimeOfDay animation="true" dateTime="2022-10-01T12:00:00" />
+              <Weather cloudState="$cloud_State">
+                <Sun intensity="10000" azimuth="0" elevation="1.57" />
+                <Fog visualRange="10000.0" />
+                <Precipitation precipitationType="$weather_condition" intensity="$precipitationType_intensity" />
               </Weather>
-              <RoadCondition frictionScaleFactor="1.0"/>
+              <RoadCondition frictionScaleFactor="1.0" />
             </Environment>
           </EnvironmentAction>
         </GlobalAction>
@@ -55,7 +61,7 @@
           <PrivateAction>
             <TeleportAction>
               <Position>
-                <WorldPosition x="$egoXinitposition" y="$egoYinitposition" z="$ego_height" h="0" p="0" r="0"/>
+                <WorldPosition x="$egoXinitposition" y="$egoYinitposition" z="$ego_height" h="0" p="0" r="0" />
               </Position>
             </TeleportAction>
           </PrivateAction>
@@ -65,18 +71,17 @@
               <AssignControllerAction>
                 <Controller name="HeroAgent">
                   <Properties>
-                    <Property name="module" value="autonomous_driving_system"/>
-                    <Property name="gps_delay" value="0.3"/>
+                    <Property name="module" value="autonomous_driving_system" />
                   </Properties>
                 </Controller>
               </AssignControllerAction>
               <OverrideControllerValueAction>
-                <Throttle value="0" active="false"/>
-                <Brake value="0" active="false"/>
-                <Clutch value="0" active="false"/>
-                <ParkingBrake value="0" active="false"/>
-                <SteeringWheel value="0" active="false"/>
-                <Gear number="0" active="false"/>
+                <Throttle value="0" active="false" />
+                <Brake value="0" active="false" />
+                <Clutch value="0" active="false" />
+                <ParkingBrake value="0" active="false" />
+                <SteeringWheel value="0" active="false" />
+                <Gear number="0" active="false" />
               </OverrideControllerValueAction>
             </ControllerAction>
           </PrivateAction>
@@ -84,21 +89,21 @@
       </Actions>
     </Init>
 
-    <Story name="EGO_GPS_Delay_Validation_Story">
-      <Act name="EGO_MainAct">
-        <ManeuverGroup name="EGOGroup" maximumExecutionCount="1">
+    <Story name="EgoSensorDrop">
+      <Act name="SensorStartAct">
+        <ManeuverGroup maximumExecutionCount="1" name="SensorDropGroup">
           <Actors selectTriggeringEntities="false">
             <EntityRef entityRef="hero"/>
           </Actors>
-          <Maneuver name="MaintainSpeedManeuver">
-            <Event name="StartDriving" priority="overwrite">
-              <Action name="MaintainSpeed">
+          <Maneuver name="StartWithSteadySpeed">
+            <Event name="MaintainSpeed" priority="overwrite">
+              <Action name="SetInitialSpeed">
                 <PrivateAction>
                   <LongitudinalAction>
                     <SpeedAction>
-                      <SpeedActionDynamics dynamicsShape="linear" value="10" dynamicsDimension="time"/>
+                      <SpeedActionDynamics dynamicsShape="step" value="20" dynamicsDimension="time" />
                       <SpeedActionTarget>
-                        <AbsoluteTargetSpeed value="15.0"/>
+                        <AbsoluteTargetSpeed value="15" />
                       </SpeedActionTarget>
                     </SpeedAction>
                   </LongitudinalAction>
@@ -106,9 +111,9 @@
               </Action>
               <StartTrigger>
                 <ConditionGroup>
-                  <Condition name="StartNow" delay="0" conditionEdge="rising">
+                  <Condition name="AtSimStart" delay="0" conditionEdge="rising">
                     <ByValueCondition>
-                      <SimulationTimeCondition value="0" rule="greaterThan"/>
+                      <SimulationTimeCondition value="0" rule="greaterThan" />
                     </ByValueCondition>
                   </Condition>
                 </ConditionGroup>
@@ -119,9 +124,9 @@
 
         <StartTrigger>
           <ConditionGroup>
-            <Condition name="ActStart" delay="0" conditionEdge="rising">
+            <Condition name="AtSimStart" delay="0" conditionEdge="rising">
               <ByValueCondition>
-                <SimulationTimeCondition value="0" rule="greaterThan"/>
+                <SimulationTimeCondition value="0" rule="greaterThan" />
               </ByValueCondition>
             </Condition>
           </ConditionGroup>
@@ -131,9 +136,9 @@
 
     <StopTrigger>
       <ConditionGroup>
-        <Condition name="EndScenario" delay="0" conditionEdge="rising">
+        <Condition name="EndAfter20s" delay="1" conditionEdge="rising">
           <ByValueCondition>
-            <SimulationTimeCondition value="15" rule="greaterThan"/>
+            <SimulationTimeCondition value="20.0" rule="greaterThan" />
           </ByValueCondition>
         </Condition>
       </ConditionGroup>
diff --git a/dev/Scenario/EGO/EGO_S004.xosc b/dev/Scenario/EGO/EGO_S004.xosc
index a556030..3e00e74 100644
--- a/dev/Scenario/EGO/EGO_S004.xosc
+++ b/dev/Scenario/EGO/EGO_S004.xosc
@@ -99,7 +99,7 @@
                 <PrivateAction>
                   <LongitudinalAction>
                     <SpeedAction>
-                      <SpeedActionDynamics dynamicsShape="linear" value="10" dynamicsDimension="time"/>
+                      <SpeedActionDynamics dynamicsShape="linear" value="30" dynamicsDimension="time"/>
                       <SpeedActionTarget>
                         <AbsoluteTargetSpeed value="15.0"/>
                       </SpeedActionTarget>
diff --git a/dev/test/ACC_S001.py b/dev/test/ACC_S001.py
index 022e020..303df2c 100644
--- a/dev/test/ACC_S001.py
+++ b/dev/test/ACC_S001.py
@@ -1,14 +1,5 @@
-# === Debugging Print ===
-        print(f"[ACC] Mode: {acc_mode.name} | ACC Accel: {acc_accel:.2f} m/s²")
-        print(f"[AEB] Mode: {aeb_mode.name} | AEB Accel: {aeb_accel:.2f} m/s²")
-        print(f"[LFA] Mode: {lfa_mode.name} | Steer_PID: {steer_pid:.2f}° | Steer_Stanley: {steer_sta:.2f}° | Final Steer: {steer_cmd:.2f}°")
-        #print(f"[CTRL] Throttle: {self.control.throttle:.2f} | Brake: {self.control.brake:.2f} | Steer: {self.control.steer:.2f}")
-        print(f"[Filtered] {len(filtered)} objects")
-        if filtered:
-            for i, obj in enumerate(filtered):
-                print(
-                    f"  F{i}: ID={obj.object_id}, dist={obj.distance:.2f}, status={obj.status.name}, cell={obj.cell_id}")
-
-        print(f"[Predicted] {len(predicted)} objects")
-        print(
-            f"[ACC Target] ID={acc_target.object_id}, Dist={acc_target.distance:.2f}, Mode={acc_mode.name}, Accel={acc_accel:.2f}")
\ No newline at end of file
+elapsed_sec = int((self.current_time_ms - self.start_time_ms) // 1000)
+ego_velocity = ego_data.velocity_x
+print(f"[STEP1][{elapsed_sec} sec] throttle = {self.control.throttle:.2f}, accel = {self.imu_data.accel_x:.2f} m/s², velocity = {ego_velocity:.2f} m/s")
+print(f"[STEP2][{elapsed_sec} sec] ACC_Mode = {acc_mode.name}")
+print(f"[STEP3][{elapsed_sec} sec] velocity = {ego_velocity:.2f} m/s (avg = {avg_speed:.2f})")
diff --git a/dev/test/ACC_S002.py b/dev/test/ACC_S002.py
new file mode 100644
index 0000000..1c0e878
--- /dev/null
+++ b/dev/test/ACC_S002.py
@@ -0,0 +1,17 @@
+# === Debugging Print for ACC_S002 Scenario ===
+elapsed_sec = int((self.current_time_ms - self.start_time_ms) // 1000)
+
+# STEP 1: 전방 차량 감지 여부
+if acc_target is not None and acc_target.object_id >= 0 and acc_target.distance <= 80.0:
+    print(f"[STEP1][{elapsed_sec} sec] Target detected: ID = {acc_target.object_id}, Distance = {acc_target.distance:.2f} m")
+
+# STEP 2: ACC 모드 출력 (전환 여부는 로그 흐름으로 확인)
+print(f"[STEP2][{elapsed_sec} sec] ACC Mode = {acc_mode.name}, Accel_ACC_X = {acc_accel:.2f} m/s²")
+
+# STEP 3: 거리 유지 진입 후 평균 거리 계산 (5초 이상 유지 확인)
+if 39.0 <= acc_target.distance <= 41.0:
+    self.dist_buffer.append(acc_target.distance)
+
+if len(self.dist_buffer) >= int(5.0 / dt_sec):  # 5초치 데이터 확보
+    avg_dist = sum(self.dist_buffer) / len(self.dist_buffer)
+    print(f"[STEP3][{elapsed_sec} sec] Maintaining distance: Avg = {avg_dist:.2f} m over 5.0 s")
diff --git a/dev/test/EGO_S001..py b/dev/test/EGO_S001..py
index 0c3ecef..661d4d2 100644
--- a/dev/test/EGO_S001..py
+++ b/dev/test/EGO_S001..py
@@ -1,15 +1,26 @@
-print(    f"[STEP1] Ego_Position = ({ego_data.position_x:.2f}, {ego_data.position_y:.2f}, {ego_data.position_z:.2f}) → 기준 (0.00, 0.00, 0.00)")
+# Step 1
+print(f"[STEP1] Ego_Position = ({ego_data.position_x:.2f}, {ego_data.position_y:.2f}, {ego_data.position_z:.2f}) → 기준 (0.00, 0.00, 0.00)")
 
-
-# 기준 좌표 변환
+# Step 2
+# === Ego 차량 Transform 및 위치 ===
 ego_tf = self._actor.get_transform()
 ego_loc = ego_tf.location
-front_offset_x = 1.5  # 차량 앞바퀴 중심 오프셋 (예시값)
-ref_x = ego_loc.x - front_offset_x
-ref_y = ego_loc.y
-print(f"[STEP2] ego.get_location() = ({ego_loc.x:.2f}, {ego_loc.y:.2f}) → 기준점 변환 후 ({ref_x:.2f}, {ref_y:.2f})")
+front_offset_x = 1.5  # 차량 앞바퀴 기준 오프셋
+
+# Carla 상의 절대 위치 (기준: 차량의 중심 위치)
+carla_loc = ego_loc
+
+# Ego 차량 기준 좌표계로 변환 (기준: 앞바퀴 기준)
+ego_ref_x = ego_loc.x - front_offset_x
+ego_ref_y = ego_loc.y
+loc_x = ego_loc.x - front_offset_x - ego_ref_x  # = 0
+loc_y = ego_loc.y - ego_ref_y                   # = 0
+
+# === 디버깅 출력 ===
+print(f"[DEBUG][STEP2] Carla 절대 위치 = ({carla_loc.x:.2f}, {carla_loc.y:.2f}) | Ego 기준 위치 = ({loc_x:.2f}, {loc_y:.2f})")
 
 
+# Step 3
 if hasattr(self, "prev_ego_position"):
     dx = abs(ego_data.position_x - self.prev_ego_position[0])
     dy = abs(ego_data.position_y - self.prev_ego_position[1])
@@ -17,6 +28,7 @@ if hasattr(self, "prev_ego_position"):
 self.prev_ego_position = (ego_data.position_x, ego_data.position_y)
 
 
+# Step 4
 for obj in obj_list:
     dist_calc = math.hypot(obj.position_x, obj.position_y)
     print(f"[STEP4] Object_ID={obj.object_id} → Position=({obj.position_x:.2f}, {obj.position_y:.2f}), "
diff --git a/dev/test/EGO_S002.py b/dev/test/EGO_S002.py
index d2f4355..210cda7 100644
--- a/dev/test/EGO_S002.py
+++ b/dev/test/EGO_S002.py
@@ -1,18 +1,31 @@
-# Step 0: 센서 수신 확인
-print("======================================")
-print(f"[EGO] Velocity: {ego_data.velocity_x:.2f} m/s | Accel: {ego_data.accel_x:.2f} m/s² | Heading: {ego_data.heading:.2f}°")
-print(f"[DEBUG][S0] time={self.current_time_ms:.1f}ms gps_ts = {self.gps_data.timestamp:.1f} ms, imu = ({self.imu_data.accel_x:.2f}, {self.imu_data.accel_y:.2f})")
+# Step 1
+ego_velocity = ego_data.velocity_x
+velocity_error = abs(ego_velocity - 15.0)
+elapsed_sec = int((self.current_time_ms - self.start_time_ms) // 1000)
 
-# Step 1: 추정 속도 vs 목표 속도
-speed_error_target = abs(ego_data.velocity_x - 15.0)
-print(f"[DEBUG][S1] Velocity = {ego_data.velocity_x:.2f} m/s, Target = 15.00 m/s, Error = {speed_error_target:.2f} m/s → {'OK' if speed_error_target <= 1.0 else 'FAIL'}")
+if velocity_error <= 5.0:
+    print(f"[STEP1][{elapsed_sec} sec] velocity = {ego_velocity:.2f} m/s → Pass")
+else:
+    print(f"[STEP1][{elapsed_sec} sec] velocity = {ego_velocity:.2f} m/s → Fail")
 
-# Step 2: GPS 수신 간격 확인
+
+
+# Step 2
+elapsed_sec = int((self.current_time_ms - self.start_time_ms) // 1000)
 gps_dt = abs(self.current_time_ms - self.gps_data.timestamp)
-print(f"[DEBUG][S2] gps_dt = {gps_dt:.1f} ms → {'OK' if gps_dt <= 50.0 else 'FAIL'}")
+if gps_dt <= 50.0:
+     print(f"[STEP2][{elapsed_sec} sec] GPS 수신 시각 지연 = {gps_dt:.1f} ms → Pass")
+else:
+     print(f"[STEP2][{elapsed_sec} sec] GPS 수신 시각 지연 = {gps_dt:.1f} ms → Fail")
+
+
+# Step 3
+elapsed_sec = int((self.current_time_ms - self.start_time_ms) // 1000)
+estimated_vx = ego_data.velocity_x
+groundtruth_vx = self._actor.get_velocity().x
+velocity_error = abs(estimated_vx - groundtruth_vx)
+if velocity_error <= 5.0:
+    print(f"[STEP3] [{elapsed_sec} sec] 추정 속도 오차 = {velocity_error:.2f} m/s → Pass")
+else:
+    print(f"[STEP3] [{elapsed_sec} sec] 추정 속도 오차 = {velocity_error:.2f} m/s → Fail")
 
-# Step 3: Ground Truth와 비교
-gt_vel = self._actor.get_velocity()
-gt_speed = math.hypot(gt_vel.x, gt_vel.y)
-speed_error_gt = abs(ego_data.velocity_x - gt_speed)
-print(f"[DEBUG][S3] EstimatedVelocity = {ego_data.velocity_x:.2f} m/s, GroundTruthVelocity = {gt_speed:.2f} m/s, Error = {speed_error_gt:.2f} m/s → {'OK' if speed_error_gt <= 1.0 else 'FAIL'}")
diff --git a/dev/test/EGO_S003.py b/dev/test/EGO_S003.py
index d0391d5..e1acffc 100644
--- a/dev/test/EGO_S003.py
+++ b/dev/test/EGO_S003.py
@@ -1,24 +1,13 @@
-# === Debugging Print for EGO_S003 ===
-print("======================================")
-print(f"[EGO] Velocity: {ego_data.velocity_x:.2f} m/s | Accel: {ego_data.accel_x:.2f} m/s² | Heading: {ego_data.heading:.2f}°")
-print(f"[DEBUG][S0] time = {self.current_time_ms:.1f} ms")
-
+elapsed_sec = int((self.current_time_ms - self.start_time_ms) // 1000)
 gps_dt = abs(self.current_time_ms - self.gps_data.timestamp)
-print(f"[DEBUG][S1] gps_dt = {gps_dt:.1f} ms → {'FAIL' if gps_dt <= 50.0 else 'OK'}")
-
-# Step 2: Kalman 필터 업데이트 비활성 여부 (직접 변수 없음 → Step 1으로 간접 판단)
-# 추가 조건이 없으므로 생략 가능
-
-# Step 3: 속도 추정 연속성 확인 (이전 추정값과 비교)
-if hasattr(self, "prev_est_vel_x"):
-    d_est_vel = abs(ego_data.velocity_x - self.prev_est_vel_x)
-    print(f"[DEBUG][S2] ΔEstimatedVelocity = {d_est_vel:.3f} m/s → {'OK' if d_est_vel < 2.0 else 'FAIL'}")
-else:
-    print("[DEBUG][S2] ΔEstimatedVelocity = --- (초기 프레임)")
-self.prev_est_vel_x = ego_data.velocity_x
-
-# Step 4: Kalman 추정값과 Ground Truth 비교
-gt_vel = self._actor.get_velocity()
-gt_speed = math.hypot(gt_vel.x, gt_vel.y)
-error_speed = abs(ego_data.velocity_x - gt_speed)
-print(f"[DEBUG][S3] EstimatedVelocity = {ego_data.velocity_x:.2f} m/s, GroundTruthVelocity = {gt_speed:.2f} m/s, Error = {error_speed:.2f} m/s → {'OK' if error_speed <= 2.0 else 'FAIL'}")
+gt_vel = self._actor.get_velocity().x
+vel_err = abs(gt_vel - ego_data.velocity_x)
+imu_valid = abs(self.imu_data.accel_x) < 9.8
+gps_valid = gps_dt <= 50.0
+
+print(f"[STEP1][{elapsed_sec} sec] 정속 주행 확인 → Velocity = {ego_data.velocity_x:.2f} m/s")
+print(f"[STEP2][{elapsed_sec} sec] GPS 수신 지연 = {gps_dt:.1f} ms, gps_update_enabled = {self.kf_state.gps_update_enabled}")
+print(f"[STEP3][{elapsed_sec} sec] Filtered_Accel_X = {self.kf_state.prev_accel_x:.2f}, Filtered_Yaw_Rate = {self.kf_state.prev_yaw_rate:.2f}")
+print(f"[STEP4][{elapsed_sec} sec] Ego_Velocity_X = {ego_data.velocity_x:.2f}, Ego_Acceleration_X = {ego_data.accel_x:.2f}")
+print(f"[STEP5][{elapsed_sec} sec] GPS valid: {gps_valid}, IMU valid: {imu_valid}")
+print(f"[STEP6][{elapsed_sec} sec] Ego_Velocity_X = {ego_data.velocity_x:.2f}, GroundTruth = {gt_vel:.2f}, Error = {vel_err:.2f}")
-- 
2.49.0.windows.1

